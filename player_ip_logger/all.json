{
  "meta": {
    "schema_version": 4,
    "id": "player_ip_logger",
    "name": "Player IP Logger",
    "version": "1.2.1",
    "link": "https://github.com/LoosePrince/PF-player_ip_logger",
    "authors": [
      "Shusao",
      "XueK__"
    ],
    "dependencies": {},
    "requirements": [],
    "description": {
      "en_us": "Record player IP addresses",
      "zh_cn": "记录玩家IP地址"
    }
  },
  "plugin": {
    "schema_version": 1,
    "id": "player_ip_logger",
    "authors": [
      "XueK66",
      "LoosePrince"
    ],
    "repository": "https://github.com/PFingan-Code/PF-player_ip_logger",
    "branch": "main",
    "related_path": "",
    "labels": [
      "api"
    ],
    "introduction": {
      "zh_cn": "![PF-player_ip_logger](https://socialify.git.ci/LoosePrince/PF-player_ip_logger/image?description=1&font=Inter&language=1&name=1&pattern=Floating%20Cogs&theme=Light)\n# Player IP Logger for MCDReforged\n\n[![仓库大小](https://img.shields.io/github/repo-size/LoosePrince/PF-player_ip_logger?style=flat-square&label=仓库占用)](https://github.com/PFingan-Code/PF-player_ip_logger/tree/main//) \n[![最新版](https://img.shields.io/github/v/release/LoosePrince/PF-player_ip_logger?style=flat-square&label=最新版)](https://github.com/LoosePrince/PF-player_ip_logger/releases/latest)\n[![总下载量](https://img.shields.io/github/downloads/LoosePrince/PF-player_ip_logger/total?style=flat-square&label=下载量)](https://github.com/LoosePrince/PF-player_ip_logger/releases)\n[![最新发布下载量](https://img.shields.io/github/downloads/LoosePrince/PF-player_ip_logger/latest/total?style=flat-square&label=最新版本下载量)](https://github.com/LoosePrince/PF-player_ip_logger/releases/latest)\n\n#### 插件简介\n**Player IP Logger** 是一款为 MCDReforged (MCDR) 开发的插件，主要功能是记录玩家的 IP 地址。该插件通过监控玩家的登录和断开连接事件，记录玩家对应的 IP 地址，并提供便捷的 API 供服务器管理员进行查询、封禁或解禁操作。\n\n#### 功能\n\n- **自动记录玩家 IP**: 插件会自动监控玩家的登录和断线信息，捕获并保存 IP 地址。\n- **封禁与解禁功能**: 支持通过命令封禁或解禁玩家或 IP 地址，适用于服务器管理。\n- **多格式支持**: 支持多种日志格式解析，确保不同场景下都能正确提取玩家的 IP 地址。\n- **IP 地址存储**: 将玩家所有历史 IP 地址保存到配置文件中，避免重复记录。\n- **支持 API 调用**: 提供了多种 API，方便插件调用，或让管理员查询玩家的 IP 信息。\n- **假人判断**： 假人一般没有IP，通过这个特性可以判断出假人，多用于玩家列表筛选。\n\n#### 安装与配置\n1. **安装**: 将插件文件放入 MCDReforged 的 `plugins` 目录中，启动服务器。\n2. **配置**: 插件会自动生成一个 `config.json` 配置文件，存储玩家和 IP 记录。文件格式如下：\n\n    ```json\n    {\n        \"users\": {\n            \"玩家名称\": [\n                \"玩家的IP1\",\n                \"玩家的IP2\"\n            ]\n        },\n        \"banned_player\": [],\n        \"banned_ips\": []\n    }\n    ```\n\n#### 命令\n\n- **!!ip ban `<player/ip>`**: 封禁指定玩家或 IP。\n- **!!ip pardon `<player/ip>`**: 解禁指定玩家或 IP。\n- **!!ip list**: 显示当前封禁的玩家和 IP。\n\n#### 事件处理\n\n- 当玩家登录或断开连接时，插件会自动解析相关日志信息，并提取玩家名称和 IP 地址。\n- 如果玩家的 IP 地址尚未记录，将其添加到配置文件中，并自动保存。\n\n#### 支持的事件格式\n该插件支持以下日志格式的解析：\n- `玩家名[/IP地址:端口] logged in with entity id`\n- `Disconnecting 玩家名 (/IP地址:端口)`\n- `玩家名 (/IP地址:端口) lost connection`\n\n更多事件请反馈以增加\n\n#### 使用\n插件会自动运行并自动监听玩家的登录与断开事件，并记录 IP 地址，不需要任何配置。管理员可以快速对玩家或 IP 进行封禁或解禁操作，或者查看封禁列表。\n\n---\n\n### API 开发\n\n1. **is_player(name: str) -> bool**\n   - **描述**: 检查是否是真实玩家（多用于假人判断）\n   - **参数**:\n     - `name`：玩家名称。\n   - **返回**: 如果玩家存在记录返回 `True`，否则返回 `False`。\n\n   **示例**:\n   ```python\n   if is_player(\"Shusao\"):\n       print(\"Shusao 是 真人玩家\")\n   else:\n       print(\"Shusao 是 假人\")\n   ```\n\n2. **get_player_ips(name: str) -> list**\n   - **描述**: 获取指定玩家的所有 IP 地址。\n   - **参数**:\n     - `name`：玩家名称。\n   - **返回**: 包含玩家所有历史 IP 地址的列表。如果玩家没有记录，返回空列表。\n\n   **示例**:\n   ```python\n   ips = get_player_ips(\"Shusao\")\n   print(f\"Shusao 的 IP 历史: {ips}\")\n   ```\n\n3. **get_player_names(ip: str) -> list**\n\n   - **描述**: 获取使用该 IP 地址的所有玩家名称。\n   - **参数**:\n     - `ip`：IP地址。\n\n   - **返回**: 包含玩家名称的列表。\n\n4. **ban_player(name: str) -> None**\n   - **描述**: 封禁指定玩家(支持离线玩家), 后续通过该ID登录的IP也会被封。\n   - **参数**:\n     - 玩家ID。\n\n5. **unban_player(name: str) -> None**\n   - **描述**: 解禁指定玩家。\n   - **参数**:\n     - 玩家ID。\n\n6. **ban_ip(ip: str) -> None**\n   - **描述**: 封禁指定IP, 后续通过该IP登录的玩家也会被封。\n   - **参数**:\n     - 玩家IP。\n\n7. **unban_ip(ip: str) -> None**\n   - **描述**: 解禁指定IP。\n   - **参数**:\n     - 玩家IP。\n\n### API 开发(事件)\n\n1. **player_ip_logger.player_login**\n   - **描述**: 玩家登录时分发 `player_ip_logger.player_login` 事件，便于其他插件上报信息\n   - **样例**:\n      ```python\n      def do_something(server: PluginServerInterface, player_name:str, player_ip:str):\n          pass\n\n      server.register_event_listener('player_ip_logger.player_login', do_something)\n      ```\n\n### 使用此API的插件\n\n- [PF-GUGUbot](https://github.com/LoosePrince/PF-GUGUBot) : MCDR-GUGUBot QQ机器人 群聊管理 聊天互转\n  > 用于区分真实玩家\n\n- [IPLocation](https://github.com/Mooling0602/IPLocation-MCDR) : 在玩家上线时查询并显示IP归属地。\n  > 获取玩家IP\n\n- [NDP](https://github.com/No-Danger-Player-Project/NDP-MCDR) : NDP联合封禁系统客户端\n  > 获取玩家IP\n\n---\n\n### 贡献\n如果发现问题，或希望贡献代码，欢迎在 GitHub 提交 Issue 或 Pull Request。\n\n- 插件初版提供: 树梢（[LoosePrince](https://github.com/LoosePrince)）\n- 技术支持: 雪开（[XueK66](https://github.com/XueK66)）\n- 文档编写: 树梢（[LoosePrince](https://github.com/LoosePrince)）、 雪开（[XueK66](https://github.com/XueK66)）\n\n---\n\n#### 未来计划\n- 暂无\n\n欢迎提建议！\n"
    },
    "introduction_urls": {
      "zh_cn": "https://raw.githubusercontent.com/PFingan-Code/PF-player_ip_logger/main//README.md"
    }
  },
  "release": {
    "schema_version": 8,
    "id": "player_ip_logger",
    "latest_version": "1.2.1",
    "latest_version_index": 0,
    "releases": [
      {
        "url": "https://github.com/PFingan-Code/PF-player_ip_logger/releases/tag/v1.2.1",
        "name": "v1.2.1",
        "tag_name": "v1.2.1",
        "created_at": "2025-06-06T06:17:31Z",
        "description": "- fix config not save during ban/pardon function\r\n\r\n## What's Changed\r\n* 增加玩家名正则判定配置，可供用户自行调整避免错误 by @Mooling0602 in https://github.com/LoosePrince/PF-player_ip_logger/pull/6\r\n\r\n## New Contributors\r\n* @Mooling0602 made their first contribution in https://github.com/LoosePrince/PF-player_ip_logger/pull/6\r\n\r\n**Full Changelog**: https://github.com/LoosePrince/PF-player_ip_logger/compare/v1.2.0...v1.2.1",
        "prerelease": false,
        "asset": {
          "id": 261473700,
          "name": "player_ip_logger.mcdr",
          "size": 5555,
          "download_count": 696,
          "created_at": "2025-06-06T06:19:17Z",
          "browser_download_url": "https://github.com/PFingan-Code/PF-player_ip_logger/releases/download/v1.2.1/player_ip_logger.mcdr",
          "hash_md5": "be26002884a7e654bc781e9349ac3c88",
          "hash_sha256": "be6956028ce8f4df98f1b595f8304438326e7946666147d0e4a20f7e2ccc099e"
        },
        "meta": {
          "schema_version": 4,
          "id": "player_ip_logger",
          "name": "Player IP Logger",
          "version": "1.2.1",
          "link": "https://github.com/LoosePrince/PF-player_ip_logger",
          "authors": [
            "Shusao",
            "XueK__"
          ],
          "dependencies": {},
          "requirements": [],
          "description": {
            "en_us": "Record player IP addresses",
            "zh_cn": "记录玩家IP地址"
          }
        }
      },
      {
        "url": "https://github.com/PFingan-Code/PF-player_ip_logger/releases/tag/v1.2.0",
        "name": "v1.2.0",
        "tag_name": "v1.2.0",
        "created_at": "2024-11-05T07:03:13Z",
        "description": "- Add dispatch event: `player_ip_logger.player_login` report (player_name:str, player_ip:str) when player login to the server. #2 \r\n- fix an error when calling !!ip list\r\n\r\n## What's Changed\r\n* 1.1.0 by @XueK66 in https://github.com/LoosePrince/PF-player_ip_logger/pull/1\r\n* 1.2.0 by @XueK66 in https://github.com/LoosePrince/PF-player_ip_logger/pull/3\r\n\r\n## New Contributors\r\n* @XueK66 made their first contribution in https://github.com/LoosePrince/PF-player_ip_logger/pull/1\r\n\r\n**Full Changelog**: https://github.com/LoosePrince/PF-player_ip_logger/compare/v1.1.0...v1.2.0\r\n\r\nContribution:\r\n@Mooling0602: provides a valuable suggestion on this plugin!",
        "prerelease": false,
        "asset": {
          "id": 204209335,
          "name": "player_ip_logger.mcdr",
          "size": 2805,
          "download_count": 535,
          "created_at": "2024-11-05T07:06:15Z",
          "browser_download_url": "https://github.com/PFingan-Code/PF-player_ip_logger/releases/download/v1.2.0/player_ip_logger.mcdr",
          "hash_md5": "988ea1508dc6d51c6cb2532e77385c64",
          "hash_sha256": "c2ecb2e2029b399b7a293305ae23ae2ee6363ac82c7b914a92bd2741134ff233"
        },
        "meta": {
          "schema_version": 4,
          "id": "player_ip_logger",
          "name": "Player IP Logger",
          "version": "1.2.0",
          "link": "https://github.com/LoosePrince/PF-player_ip_logger",
          "authors": [
            "Shusao",
            "XueK__"
          ],
          "dependencies": {},
          "requirements": [],
          "description": {
            "en_us": "Record player IP addresses",
            "zh_cn": "记录玩家IP地址"
          }
        }
      },
      {
        "url": "https://github.com/PFingan-Code/PF-player_ip_logger/releases/tag/v1.1.0",
        "name": "V1.1.0",
        "tag_name": "v1.1.0",
        "created_at": "2024-10-21T03:56:36Z",
        "description": "新增游戏内指令 `!!ip`\r\n`!!ip ban <player name/play ip>` ban人\r\n`!!ip pardon <player name/play ip>` 解ban\r\n`!!ip list` 查看ban人情况",
        "prerelease": false,
        "asset": {
          "id": 200666866,
          "name": "player_ip_logger.mcdr",
          "size": 2660,
          "download_count": 75,
          "created_at": "2024-10-21T15:25:50Z",
          "browser_download_url": "https://github.com/PFingan-Code/PF-player_ip_logger/releases/download/v1.1.0/player_ip_logger.mcdr",
          "hash_md5": "0a0bcf99f84af56f72e8180ac3230506",
          "hash_sha256": "d587cc9b3330c64685baa31a394ff1d3ff3243ae0b58d5663add810d6fea5574"
        },
        "meta": {
          "schema_version": 4,
          "id": "player_ip_logger",
          "name": "Player IP Logger",
          "version": "1.1.0",
          "link": "https://github.com/LoosePrince/PF-player_ip_logger",
          "authors": [
            "Shusao",
            "XueK__"
          ],
          "dependencies": {},
          "requirements": [],
          "description": {
            "en_us": "Record player IP addresses",
            "zh_cn": "记录玩家IP地址"
          }
        }
      }
    ]
  },
  "repository": {
    "url": "https://github.com/PFingan-Code/PF-player_ip_logger",
    "name": "PF-player_ip_logger",
    "full_name": "PFingan-Code/PF-player_ip_logger",
    "html_url": "https://github.com/PFingan-Code/PF-player_ip_logger",
    "description": "MCDR玩家IP记录插件",
    "archived": false,
    "stargazers_count": 1,
    "watchers_count": 1,
    "forks_count": 1,
    "readme": "![PF-player_ip_logger](https://socialify.git.ci/LoosePrince/PF-player_ip_logger/image?description=1&font=Inter&language=1&name=1&pattern=Floating%20Cogs&theme=Light)\n# Player IP Logger for MCDReforged\n\n[![仓库大小](https://img.shields.io/github/repo-size/LoosePrince/PF-player_ip_logger?style=flat-square&label=仓库占用)](https://github.com/LoosePrince/PF-player_ip_logger/tree/main//) \n[![最新版](https://img.shields.io/github/v/release/LoosePrince/PF-player_ip_logger?style=flat-square&label=最新版)](https://github.com/LoosePrince/PF-player_ip_logger/releases/latest)\n[![总下载量](https://img.shields.io/github/downloads/LoosePrince/PF-player_ip_logger/total?style=flat-square&label=下载量)](https://github.com/LoosePrince/PF-player_ip_logger/releases)\n[![最新发布下载量](https://img.shields.io/github/downloads/LoosePrince/PF-player_ip_logger/latest/total?style=flat-square&label=最新版本下载量)](https://github.com/LoosePrince/PF-player_ip_logger/releases/latest)\n\n#### 插件简介\n**Player IP Logger** 是一款为 MCDReforged (MCDR) 开发的插件，主要功能是记录玩家的 IP 地址。该插件通过监控玩家的登录和断开连接事件，记录玩家对应的 IP 地址，并提供便捷的 API 供服务器管理员进行查询、封禁或解禁操作。\n\n#### 功能\n\n- **自动记录玩家 IP**: 插件会自动监控玩家的登录和断线信息，捕获并保存 IP 地址。\n- **封禁与解禁功能**: 支持通过命令封禁或解禁玩家或 IP 地址，适用于服务器管理。\n- **多格式支持**: 支持多种日志格式解析，确保不同场景下都能正确提取玩家的 IP 地址。\n- **IP 地址存储**: 将玩家所有历史 IP 地址保存到配置文件中，避免重复记录。\n- **支持 API 调用**: 提供了多种 API，方便插件调用，或让管理员查询玩家的 IP 信息。\n- **假人判断**： 假人一般没有IP，通过这个特性可以判断出假人，多用于玩家列表筛选。\n\n#### 安装与配置\n1. **安装**: 将插件文件放入 MCDReforged 的 `plugins` 目录中，启动服务器。\n2. **配置**: 插件会自动生成一个 `config.json` 配置文件，存储玩家和 IP 记录。文件格式如下：\n\n    ```json\n    {\n        \"users\": {\n            \"玩家名称\": [\n                \"玩家的IP1\",\n                \"玩家的IP2\"\n            ]\n        },\n        \"banned_player\": [],\n        \"banned_ips\": []\n    }\n    ```\n\n#### 命令\n\n- **!!ip ban `<player/ip>`**: 封禁指定玩家或 IP。\n- **!!ip pardon `<player/ip>`**: 解禁指定玩家或 IP。\n- **!!ip list**: 显示当前封禁的玩家和 IP。\n\n#### 事件处理\n\n- 当玩家登录或断开连接时，插件会自动解析相关日志信息，并提取玩家名称和 IP 地址。\n- 如果玩家的 IP 地址尚未记录，将其添加到配置文件中，并自动保存。\n\n#### 支持的事件格式\n该插件支持以下日志格式的解析：\n- `玩家名[/IP地址:端口] logged in with entity id`\n- `Disconnecting 玩家名 (/IP地址:端口)`\n- `玩家名 (/IP地址:端口) lost connection`\n\n更多事件请反馈以增加\n\n#### 使用\n插件会自动运行并自动监听玩家的登录与断开事件，并记录 IP 地址，不需要任何配置。管理员可以快速对玩家或 IP 进行封禁或解禁操作，或者查看封禁列表。\n\n---\n\n### API 开发\n\n1. **is_player(name: str) -> bool**\n   - **描述**: 检查是否是真实玩家（多用于假人判断）\n   - **参数**:\n     - `name`：玩家名称。\n   - **返回**: 如果玩家存在记录返回 `True`，否则返回 `False`。\n\n   **示例**:\n   ```python\n   if is_player(\"Shusao\"):\n       print(\"Shusao 是 真人玩家\")\n   else:\n       print(\"Shusao 是 假人\")\n   ```\n\n2. **get_player_ips(name: str) -> list**\n   - **描述**: 获取指定玩家的所有 IP 地址。\n   - **参数**:\n     - `name`：玩家名称。\n   - **返回**: 包含玩家所有历史 IP 地址的列表。如果玩家没有记录，返回空列表。\n\n   **示例**:\n   ```python\n   ips = get_player_ips(\"Shusao\")\n   print(f\"Shusao 的 IP 历史: {ips}\")\n   ```\n\n3. **get_player_names(ip: str) -> list**\n\n   - **描述**: 获取使用该 IP 地址的所有玩家名称。\n   - **参数**:\n     - `ip`：IP地址。\n\n   - **返回**: 包含玩家名称的列表。\n\n4. **ban_player(name: str) -> None**\n   - **描述**: 封禁指定玩家(支持离线玩家), 后续通过该ID登录的IP也会被封。\n   - **参数**:\n     - 玩家ID。\n\n5. **unban_player(name: str) -> None**\n   - **描述**: 解禁指定玩家。\n   - **参数**:\n     - 玩家ID。\n\n6. **ban_ip(ip: str) -> None**\n   - **描述**: 封禁指定IP, 后续通过该IP登录的玩家也会被封。\n   - **参数**:\n     - 玩家IP。\n\n7. **unban_ip(ip: str) -> None**\n   - **描述**: 解禁指定IP。\n   - **参数**:\n     - 玩家IP。\n\n### API 开发(事件)\n\n1. **player_ip_logger.player_login**\n   - **描述**: 玩家登录时分发 `player_ip_logger.player_login` 事件，便于其他插件上报信息\n   - **样例**:\n      ```python\n      def do_something(server: PluginServerInterface, player_name:str, player_ip:str):\n          pass\n\n      server.register_event_listener('player_ip_logger.player_login', do_something)\n      ```\n\n### 使用此API的插件\n\n- [PF-GUGUbot](https://github.com/LoosePrince/PF-GUGUBot) : MCDR-GUGUBot QQ机器人 群聊管理 聊天互转\n  > 用于区分真实玩家\n\n- [IPLocation](https://github.com/Mooling0602/IPLocation-MCDR) : 在玩家上线时查询并显示IP归属地。\n  > 获取玩家IP\n\n- [NDP](https://github.com/No-Danger-Player-Project/NDP-MCDR) : NDP联合封禁系统客户端\n  > 获取玩家IP\n\n---\n\n### 贡献\n如果发现问题，或希望贡献代码，欢迎在 GitHub 提交 Issue 或 Pull Request。\n\n- 插件初版提供: 树梢（[LoosePrince](https://github.com/LoosePrince)）\n- 技术支持: 雪开（[XueK66](https://github.com/XueK66)）\n- 文档编写: 树梢（[LoosePrince](https://github.com/LoosePrince)）、 雪开（[XueK66](https://github.com/XueK66)）\n\n---\n\n#### 未来计划\n- 暂无\n\n欢迎提建议！\n",
    "readme_url": "https://raw.githubusercontent.com/LoosePrince/PF-player_ip_logger/main//README.md",
    "license": {
      "key": "gpl-3.0",
      "name": "GNU General Public License v3.0",
      "spdx_id": "GPL-3.0",
      "url": "https://api.github.com/licenses/gpl-3.0"
    }
  }
}