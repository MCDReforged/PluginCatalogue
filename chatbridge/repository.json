{
  "url": "https://github.com/TISUnion/ChatBridge",
  "name": "ChatBridge",
  "full_name": "TISUnion/ChatBridge",
  "html_url": "https://github.com/TISUnion/ChatBridge",
  "description": "boardcast chat between mc servers or even discord server",
  "archived": false,
  "stargazers_count": 67,
  "watchers_count": 67,
  "forks_count": 35,
  "readme": "# ChatBridge\n\n> Broadcast chat between Minecraft servers or even discord server\n\nSee [here](https://github.com/TISUnion/ChatBridge/tree/v1) for chatbridge v1. **NOT compatible with Chatbridge v1**\n\n```mermaid\nflowchart LR\n    subgraph Minecraft Host\n    mcdr1(\"ChatBridge Client (MCDR plugin)\")<--MCDR-->smp[Minecraft Surival Server]\n    mcdr2(\"ChatBridge Client (MCDR plugin)\")<--MCDR-->cmp[Minecraft Creative Server]\n    mcdr3(\"ChatBridge Client (MCDR plugin)\")<--MCDR-->smpc[Minecraft Mirror Server]\n    online(\"ChatBridge Online Command Client\")<--RCON-->bc[Bungeecord Server]\n    end\n\n    server([\"ChatBridge Server\"])\n    server<-->mcdr1 & mcdr2 & mcdr3 & online\n    server<-->cli_client(\"CLI Client\")<-.->user[/User/]\n    server<-->cq_client(\"ChatBridge CQHttp Client\")<-->cqhttp[CQ Http bot]-.-QQ\n    server<-->khl_client(\"ChatBridge Khl Client\")<-->khl[\"Kaiheila (Kook)\"]\n    server<-->discord_client(\"ChatBridge Discord Client\")<-->Discord\n```\n\n## Disclaimer\n\nChatBridge is mainly for custom use of TIS server, especially the bot/command components:\n\n- CQHttp client\n- Discord client\n- Kaiheila client\n- Online command client\n- ...\n\nTherefore, for these bot and related clients:\n\n- Expect hardcoded constants in codes and lack of document/usage/support\n- PRs for features will not be accepted, issues complaining something don't work will probably be ignored. No after-sales support\n- If you want more features, fork this repository and implement them yourself\n\nBut the basic chatbridge components are within the support range, including:\n\n- CLI client\n- CLI server\n- MCDR plugin\n\n## 免责声明\n\nChatBridge 是一个为 TIS 服务器定制使用的工具，尤其是 bot/指令相关的组件：\n\n- CQHttp 客户端\n- Discord 客户端\n- Kaiheila 客户端\n- Online 指令客户端\n- ...\n\n因此，对于这些 bot 及相关的客户端：\n\n- 代码中将会包含若干硬编码常量，缺乏相关的文档/用法等支持\n- 功能方面的 PR 不会被接受，相关的 issue 大概率会被忽略，没有售后\n- 如果你想要更多的功能，建议你去 fork 这个仓库，然后自己实现\n\n但基本的 ChatBridge 组件都是在支持范围内，这包括：\n\n- CLI 客户端\n- CLI 服务端\n- MCDR 插件\n\n## Usage\n\nEnter `python ChatBridge.pyz` in command line to see possible helps\n\nAt launch, if the configure file is missing, chatbridge will automatically generate a default one and exit\n\n## Docker Image\n\n[![Docker](https://img.shields.io/docker/v/fallenbreath/chatbridge/latest)](https://hub.docker.com/r/fallenbreath/chatbridge)\n\nDocker Hub image: [`fallenbreath/chatbridge`](https://hub.docker.com/r/fallenbreath/chatbridge)\n\nImage name examples:\n\n- `fallenbreath/chatbridge:latest`\n- `fallenbreath/chatbridge:v2.5.3`\n\nWorking directory: `/app`\n\nExample usages: `docker run --rm fallenbreath/chatbridge:latest server`\n\nSee the [./docker](https://github.com/TISUnion/ChatBridge/tree/master/docker) directory in the repository for more details and docker compose example\n\n## Requirement\n\nPython 3.6+ required\n\nRequirements stored in `requirements.txt`, use `pip install -r requirements.txt` to install\n\n```\nmcdreforged>=2.2.0\npycryptodome\ncolorlog\n```\n\n## CLI Server\n\n```\npython ChatBridge.pyz server\n```\n\nConfigure:\n\n```json5\n{\n    \"aes_key\": \"ThisIstheSecret\",  // the common encrypt key for all clients\n    \"hostname\": \"localhost\",  // the hostname of the server. Set it to \"0.0.0.0\" for general binding\n    \"port\": 30001,  // the port of the server\n    \"clients\": [  // a list of client\n        {\n            \"name\": \"MyClientName\",  // client name\n            \"password\": \"MyClientPassword\"  // client password\n        }\n    ]\n}\n```\n\n## CLI Client\n\n```\npython ChatBridge.pyz client\n```\n\nConfigure:\n\n```json5\n{\n    \"aes_key\": \"ThisIstheSecret\",  // the common encrypt key\n    \"name\": \"MyClientName\",  // the name of the client\n    \"password\": \"MyClientPassword\",  // the password of the client\n    \"server_hostname\": \"127.0.0.1\",  // the hostname of the server\n    \"server_port\": 30001  // the port of the server\n}\n```\n\n## [MCDReforged](https://github.com/Fallen-Breath/MCDReforged) plugin client\n\nRequired MCDR >=2.2\n\nJust put the `.pyz` file into the plugin folder\n\nExtra configure fields (compared to [CLI client](#cli-client))\n\n```json5\n    \"enable\": true,  // for switching the functionality of the chatbridge plugin\n    \"debug\": false,  // for switching debug logging on\n```\n\n## Discord bot client\n\n`python ChatBridge.pyz discord_bot`\n\nExtra requirements (also listed in `/chatbridge/impl/discord/requirements.txt`):\n\n```\ndiscord.py>=2.0.0\n```\n\nExtra configure fields (compared to [CLI client](#cli-client))\n\n```json5\n    \"bot_token\": \"your.bot.token.here\",  // the token of your discord bot\n    \"channels_for_command\": [  // a list of channels, public commands can be used here\n        123400000000000000,\n        123450000000000000\n    ],\n    \"channel_for_chat\": 123400000000000000,  // the channel for chatting and private commands\n    \"command_prefix\": \"!!\",\n    \"client_to_query_stats\": \"MyClient1\",  // it should be a client as an MCDR plugin, with stats_helper plugin installed in the MCDR\n    \"client_to_query_online\": \"MyClient2\"  // a client described in the following section \"Client to respond online command\"\n```\n\n### Commands\n\n`!!stats` will send command to `MyClient1` to query the StatsHelper plugin in the specific client for data\n\n`!!online` will send command to `MyClient2` to use rcon to get `glist` command reply in bungeecord server\n\n## Client as a CoolqHttp client\n\n```\npython ChatBridge.pyz cqhttp_bot\n```\n\nExtra requirements (also listed in `/chatbridge/impl/cqhttp/requirements.txt`):\n\n```\nwebsocket-client>=1.2.1\n```\n\nNeeds any CoolQ Http protocol provider to work. e.g. [go-cqhttp](https://github.com/Mrs4s/go-cqhttp)\n\nDue to lack of channel division in QQ group (not like discord), to prevent message spam player needs to use special command to let the bot recognize the message:\n\n- In MC (othe client) use `!!qq <message>` to send message to QQ\n- In QQ use `!!mc <message>` to send message\n\nType `!!help` in QQ for more help\n\nExtra configure fields (compared to [CLI client](#cli-client))\n\n`ws_address`, `ws_port` and `access_token` are the same as the value in the config file of coolq-http-api\n\n```json5\n    \"ws_address\": \"127.0.0.1\",\n    \"ws_port\": 6700,\n    \"access_token\": \"access_token.here\",\n    \"react_group_id\": 12345,  // the target QQ group id\n    \"client_to_query_stats\": \"MyClient1\",  // it should be a client as an MCDR plugin, with stats_helper plugin installed in the MCDR\n    \"client_to_query_online\": \"MyClient2\",  // a client described in the following section \"Client to respond online command\"\n    \"server_display_name\": \"TIS\"  // The name of the server, used for display in some places\n```\n\n## Client as a Satori client\n\n```\npython ChatBridge.pyz cqhttp_bot\n```\n\nExtra requirements (also listed in `/chatbridge/impl/satori/requirements.txt`):\n\n```\nsatori-python>=0.11\n```\n\nJust like the CoolqHttp client, but it uses satori protocol\n\nExtra configure fields (compared to [CLI client](#cli-client))\n\n```json5\n    \"ws_address\": \"127.0.0.1\",  // satori server address\n    \"ws_port\": 5500,            // satori server port\n    \"ws_path\": \"\",              // satori server optional path prefix\n    \"satori_token\": \"xxxxx\",    // satori access token\n    \"react_channel_id\": 12345,  // the target channel id (for QQ, it's the group id)\n    \"chatbridge_message_prefix\": \"!!qq\",\n    \"client_to_query_stats\": \"MyClient1\",  // it should be a client as an MCDR plugin, with stats_helper plugin installed in the MCDR\n    \"client_to_query_online\": \"MyClient2\",  // a client described in the following section \"Client to respond online command\"\n    \"server_display_name\": \"TIS\"  // The name of the server, used for display in some places\n```\n\n## Kaiheila bot client\n\n`python ChatBridge.pyz satori_bot`\n\nExtra requirements (also listed in `/chatbridge/impl/kaiheila/requirements.txt`):\n\n```\nkhl.py~=0.3.17\n```\n\nExtra configure fields (compared to [CLI client](#cli-client))\n\n```json5\n    \"token\": \"\",  // kaiheila token\n    \"channels_for_command\": [  // a list of channels, public commands can be used here. use string\n        \"123400000000000000\",\n        \"123450000000000000\"\n    ],\n    \"channel_for_chat\": \"123400000000000000\",  // the channel for chatting and private commands. use string\n    \"command_prefix\": \"!!\",\n    \"client_to_query_stats\": \"MyClient1\",  // it should be a client as an MCDR plugin, with stats_helper plugin installed in the MCDR\n    \"client_to_query_online\": \"MyClient2\",  // a client described in the following section \"Client to respond online command\"\n    \"server_display_name\": \"TIS\"  // The name of the server, used for display in some places\n```\n\n## Client to respond online command\n\n```\npython ChatBridge.pyz online_command\n```\n\nExtra requirements (also listed in `/chatbridge/impl/online/requirements.txt`):\n\n```\nparse\n```\n\nExtra configure fields (compared to [CLI client](#cli-client))\n\n```json5\n    \"minecraft_list\": [\n        {\n            \"name\": \"survival\",  // the name of the minecraft server (recommend value: the same as its name in bungeecord)\n            \"address\": \"127.0.0.1\",  // the address of the server rcon\n            \"port\": \"25575\",  // the port of the server rcon\n            \"password\": \"Server Rcon Password\"  // the password of the server rcon\n        }\n    ],\n    \"bungeecord_list\": [\n        {\n            \"name\": \"BungeecordA\",  // the name of the bungeecord server (unused value)\n            \"address\": \"127.0.0.1\",  // the address of the bungeecord rcon\n            \"port\": \"39999\",  // the port of the bungeecord rcon\n            \"password\": \"Bungee Rcon Password\"  // the password of the bungeecord rcon\n        }\n    ],\n    // The display order of the servers, optional\n    // Servers not in the list will be thrown to the tail of the result and sorted in alphabetical order\n    \"display_order\": [  \n        \"survival\",  // Values are server names\n        \"creative\"\n    ]\n```\n\nCLI commands\n\n- `online`, `!!online`: Display the current online players, mostly for testing\n- `stop`: Stop the client\n",
  "readme_url": "https://raw.githubusercontent.com/TISUnion/ChatBridge/master/README.md",
  "license": {
    "key": "lgpl-3.0",
    "name": "GNU Lesser General Public License v3.0",
    "spdx_id": "LGPL-3.0",
    "url": "https://api.github.com/licenses/lgpl-3.0"
  }
}