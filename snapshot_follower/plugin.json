{
  "schema_version": 1,
  "id": "snapshot_follower",
  "authors": [
    "Fallen_Breath"
  ],
  "repository": "https://github.com/Fallen-Breath/SnapshotFollower",
  "branch": "master",
  "related_path": ".",
  "labels": [
    "management"
  ],
  "introduction": {
    "en_us": "# Snapshot Follower\n\n**English** | [中文](https://github.com/Fallen-Breath/SnapshotFollower/tree/master/README_cn.md)\n\nKeep your Minecraft server up-to-date with the latest snapshot\n\nThe plugin periodically queries about the latest Minecraft snapshot from [mojang API](https://launchermeta.mojang.com/mc/game/version_manifest.json).\nWhen a new snapshot is spotted, it will download the snapshot `server.jar`, stop the running server, replace the `server.jar`\nand finally start the server with the latest Minecraft snapshot\n\n> [!NOTE] \n> When the plugin is loaded or the server starts, the plugin will try to detect the current Minecraft version of the server \n> by reading the `version.json` inside the jar file, so it knows if the currently running Minecraft version matches the latest snapshot.\n> \n> If the detection fails, the plugin will simply assume that the current Minecraft version is the latest snapshot\n\nOptionally, an HTTP POST webhook can be triggered when the update finishes\n\n## Configuration\n\nConfig file path: `config/snapshot_follower/config.json`\n\n```json5\n{\n    \"enabled\": true,  // Switch of the plugin, default true\n\n    \"check_interval\": 60.0,  // Interval between each check\n    \"server_jar_path\": \"server/server.jar\",  // Path of the server jar file. It needs to be writeable for the update-ability\n    \"keep_downloaded_jar\": true,  // If it should keep the downloaded server.jar file after updating. Downloaded jars will be at `config/snapshot_follower/jars`\n    \"version_blacklist\": [],  // A version blacklist. Versions inside will be ignored. Useful for skipping those unwanted snapshots\n\n    \"http_proxy\": \"http://127.0.0.1:1081\",  // Optional, a http proxy url to be used for HTTP requesting\n    \"https_proxy\": \"http://127.0.0.1:1081\",  // Optional, a http proxy url to be used for HTTP requesting\n    \"request_timeout\": 10.0,  // HTTP request timeout, in seconds\n\n    \"webhook\": {\n        \"enabled\": true,  // Switch of the webwook feature. An HTTP POST request will be sent when the update finishes\n        \"use_http_proxy\": false,  // If the webhook HTTP request should use the http proxy defined above\n        \"url\": \"http://127.0.0.1:8080/my/callback\",  // Webhook url\n        \"headers\": {  // Webhook HTTP headers. Can be empty\n            \"Authorization\": \"Bearer foobar\"\n        },\n        \"body\": \"Server has been updated to {{version}}\"  // Webhook body. The placeholder {{version}} will be replaced with the updated version (e.g. 24w39a)\n    }\n}\n```\n\n## TODO\n\n- [ ] Broadcast, wait and delay-if-requested before update\n- [ ] Backup (using other plugins) before update\n",
    "zh_cn": "# Snapshot Follower\n\n[English](https://github.com/Fallen-Breath/SnapshotFollower/tree/master/README.md) | **中文**\n\n让你的 Minecraft 服务器始终保持最新快照版本\n\n该插件会定期从 [Mojang API](https://launchermeta.mojang.com/mc/game/version_manifest.json) 查询最新的 Minecraft 快照版本。\n当发现有新的快照时，它会依次进行：下载快照的 `server.jar`、停止正在运行的服务器、替换掉现有的 `server.jar`、\n使用最新的 Minecraft 快照 jar 启动服务器\n\n> [!NOTE]\n> 当插件加载或服务器启动时，插件会通过读取 `server.jar` 文件中的 `version.json` 来尝试检测当前 Minecraft 版本，\n> 从而判断当前运行的 Minecraft 版本是否与最新的快照匹配\n> \n> 如果检测失败，插件会假定当前的 Minecraft 版本就是最新的快照版本\n\n可选地，在更新完成后，插件可发起一个 HTTP POST 的 webhook\n\n## Configuration\n\n配置文件路径：`config/snapshot_follower/config.json`\n\n```json5\n{\n    \"enabled\": true,  // 插件开关，默认为 true\n\n    \"check_interval\": 60.0,  // 每次检查的间隔时间\n    \"server_jar_path\": \"server/server.jar\",  // 服务端 jar 文件的路径，需要可写以便进行更新\n    \"keep_downloaded_jar\": true,  // 更新后是否保留下载的 server.jar 文件。下载的 jar 文件将位于 `config/snapshot_follower/jars`\n    \"version_blacklist\": [],  // 版本黑名单。位于里面的版本号会被忽略。如果你希望跳过某些快照版本，就可以用这个黑名单\n\n    \"http_proxy\": \"http://127.0.0.1:1081\",  // 可选项，HTTP 请求时使用的 HTTP 代理 URL\n    \"https_proxy\": \"http://127.0.0.1:1081\",  // 可选项，HTTP 请求时使用的 HTTPS 代理 URL\n    \"request_timeout\": 10.0,  // HTTP 请求超时时间，单位为秒\n\n    \"webhook\": {\n        \"enabled\": true,  // Webhook 功能开关。插件会在更新完成后会发送一个 HTTP POST 请求\n        \"use_http_proxy\": false,  // Webhook 的 HTTP 请求是否使用上面定义的 HTTP 代理\n        \"url\": \"http://127.0.0.1:8080/my/callback\",  // webhook 的 URL\n        \"headers\": {  // Webhook 的 HTTP 请求头，可为空\n            \"Authorization\": \"Bearer foobar\"\n        },\n        \"body\": \"服务器已更新到 {{version}}\"  // Webhook 请求体。占位符 {{version}} 将被替换为更新后的版本号（例如 24w39a）\n    }\n}\n```\n\n## TODO\n\n- [ ] 更新前进行游戏内广播 + 倒计时 + 用户延迟更新支持\n- [ ] 更新前备份存档（借助其他插件）\n"
  },
  "introduction_urls": {
    "en_us": "https://raw.githubusercontent.com/Fallen-Breath/SnapshotFollower/master/README.md",
    "zh_cn": "https://raw.githubusercontent.com/Fallen-Breath/SnapshotFollower/master/README_cn.md"
  }
}